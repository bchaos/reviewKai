(function(){var e,t,r,n,o,a,i,s,l,c,u,m,d;i=function(e,t){return window.localStorage.sessionkey?e.emit("isUserLoggedin",{key:window.localStorage.sessionkey,location:t}):void 0},t=function(e,t,r,n){var o;return t.newOffset=0,t.itemsPerPage=12,t.currentPage=0,t.onCurrentPage=function(e){return e===t.currentPage?"circleselected":""},t.setUpPages=function(){var e;return e=Math.ceil(t.games.length/t.itemsPerPage),t.maxPages=e,t.pages=[],o()},o=function(){var e,r,n,o,a,i;for(o=t.maxPages,e=0,t.pages=[],a=9,r=!1,e>0&&t.pages.push({number:0,startingPoint:0}),n=i=e;o>=e?o>i:i>o;n=o>=e?++i:--i)t.pages.push({number:n,startingPoint:n*t.itemsPerPage});return o<t.maxPages-1?t.pages.push({number:t.maxPages-1,startingPoint:(t.maxPages-1)*t.itemsPerPage}):void 0},t.setPlatform=function(e){var t,r;return r=e,t=n.search("platform"),t!==r?n.search("platform",r):void 0},t.setPage=function(e){return e>=0&&e<t.maxPages?(t.currentPage=e,t.newOffset=t.currentPage*t.itemsPerPage,o()):void 0},t.gameDetails={},t.sort="-releasedate",t.convertMyRating=function(e){var t;return e=parseInt(e),e>10&&(e/=20),e>5&&(e/=2),t=function(){switch(!1){case-1!==e:return"I need to rate this game";case 1!==e:return"This game is  unplayable";case 2!==e:return"Bad but playable in a pinch";case 3!==e:return"A fairly average game";case 4!==e:return"Good game with some minor flaws";default:return"A nearly flawless gameplay experience"}}()},t.convertAverageLibraryClass=function(e,r,n){return t.convertAverageClass(n?r:e)},t.convertAverageClass=function(e){var t;return e&&0!==e&&-1!==e?t=function(){switch(!1){case!(1.5>e):return"negative";case!(2.5>e):return"negative";case!(3.5>e):return"ok";case!(4>e):return"ok";case!(4.5>e):return"postive";default:return"postive"}}():"unknown"},t.convertRating=function(e){var t;return t=function(){switch(!1){case!(1.5>e):return"Avoid this game!";case!(2.5>e):return"Do not waste your time.";case!(3.5>e):return"I might pass.";case!(4>e):return"This game is a maybe.";case!(4.5>e):return"Play this game!";default:return"You will love this game!"}}()},t.getGameStyle=function(e){return{background:'url("'+e+'")',"background-size":"100% 100%","background-repeat":"no-repeat"}},t.colorForScore=function(e){var t;return t=function(){switch(!1){case!(1.5>e):return{color:"red","font-size":"12px"};case!(2.5>e):return{color:"red","font-size":"12px"};case!(3.5>e):return{color:"#E6C805","font-size":"12px"};case!(4>e):return{color:"#E6C805","font-size":"12px"};case!(4.5>e):return{color:"green","font-size":"12px"};default:return{color:"green","font-size":"12px"}}}()},t.showGameDescription=function(n,o,a,i){return e.show({scope:t,templateUrl:"views/gameDetailsModal.html",targetEvent:i,preserveScope:!0,clickOutsideToClose:!0}),t.gamedetails={},r.emit("getGameInfoFromWiki",n)},r.on("gameInfoForGameFromWiki",function(e){return t.gamedetails=e.results,t.gamedetails.name=gameToShownName,t.gamedetails.image=image}),t.closeGameDes=function(){return e.hide()},t.getGuruDetails=function(n,o){return e.show({scope:t,templateUrl:"views/detailsGuruModal.html",targetEvent:o,preserveScope:!0,clickOutsideToClose:!0}),r.emit("getGuruDetails",{gameid:n}),t.guruInfoLoading=!0,r.on("guruDetailsFound",function(e){return t.gameDetails=e,t.guruInfoLoading=!1})},t.closeGuru=function(){return e.hide()},t.closePeer=function(){return e.hide()},t.getPeerDetails=function(n,o){return t.modalGame={},e.show({scope:t,templateUrl:"views/detailsPeerModal.html",targetEvent:o,preserveScope:!0,clickOutsideToClose:!0}),r.emit("getPeerDetails",{gameid:n}),t.peerInfoLoading=!0,r.on("peerDetailsFound",function(e){return t.gameDetails=e,t.peerInfoLoading=!1})}},d=function(e,t,r){var n;return e.logdata={},r.on("NeedUsername",function(){return e.modal.show(),e.needUsername=!0}),e.createUsername=function(){return r.emit("addUsername",e.logdata.name)},r.on("usernameAdded",function(){return e.closeModal()}),n=function(t){switch(!1){case"connected"!==t.status:return FB.api("/me",function(e){return r.emit("loginToFaceBook",e)});case"not_authorized"!==t.status:return e.errormessage="You are not authorized";default:return e.errormessage="You are not authorized"}},window.checkLoginState=function(){return FB.getLoginStatus(function(e){return n(e)})},e.errormessage=!1,e.closeModal=function(){return e.logdata={},t.hide()},e.signUpModal=function(r,n){return t.show({scope:e,templateUrl:"views/signupSignInModal.html",targetEvent:r,preserveScope:!0,clickOutsideToClose:!0}),e.signUp=n},e.signInOrSignUpNow=function(){return e.signUp?e.signUpNow():e.signInNow()},e.signInNow=function(){var t;return t={},t.username=e.logdata.username,t.password=e.logdata.temppassword,r.emit("Login",t)},e.signUpNow=function(){var t,n;return e.logdata.password={},t={},n={},e.logdata.temppassword===e.logdata.repeat?(t.username=e.logdata.username,t.password=e.logdata.temppassword,t.name=e.logdata.name,r.emit("SignUpUser",t)):e.errormessage="Passwords do not match"},r.on("UserEmailAlreadyExists",function(){return e.errormessage="The user already exits"}),r.on("UserEmailNotFound",function(){return e.errormessage="Email not valid"}),r.on("failureMessage",function(t){return e.errormessage=t}),r.on("userLoggedin",function(){return e.closeModal()})},a=function(e,t,r){return this.$scope=e,this.socket=r,e.loggedin=!1,window.localStorage.sessionkey&&r.emit("isUserLoggedin",{key:window.localStorage.sessionkey,location:"/home"}),r.on("userLoggedin",function(t){return"/home"===t.location?(e.loggedin=!0,window.location="#/dashboard"):void 0})},a.$inject=["$scope","$mdDialog","socket"],u=function(e,t,r,n){return this.$scope=e,this.$location=t,this.socket=r,e.toggleClass=function(){return e.active="false"===e.active?"true":"false"},e.accessList=!1,"/home"!==t.path()&&"/"!==t.path()&&i(r,t.path()),e.loggedin=!0,d(e,n,r),r.on("goToLogin",function(){return i(r,t.path())}),r.on("userLoggedin",function(t){return e.accessList=t.accessList,localStorage.setItem("sessionkey",t.sessionKey)}),this.$scope.homeSelected="button-stable",this.$scope.logout=function(){return localStorage.removeItem("sessionkey"),window.location="#/home",e.accessList=!1},this.$scope.librarySelected="button-stable",this.$scope.recomendationSeleted="button-stable",this.$scope.isActive=function(e){var r;return e="/"+e,e===(r=t.path())?"pure-menu-selected":""}},u.$inject=["$scope","$location","socket","$mdDialog"],c=function(e,t,r,n){return this.$scope=e,this.socket=r,this.$location=n,e.isLoading=!0,r.emit("GetListOfPlatforms",{data:"1"}),r.on("platformsFound",function(t){return e.platforms=t,e.isLoading=!1})},c.$inject=["$scope","$location","socket","$mdDialog"],m=function(e,r,n,o){var a;return this.$scope=e,this.socket=n,this.$location=o,e.myLibrary=!1,e.isLoading=!1,e.scoreName="avgscore",e.loggedin=!0,e.SearchForAGame=!1,t(r,e,n,o),a=o.search(),e.getGame=function(){return e.isLoading=!0,e.resultsFor=e.search,n.emit("findGamesInWiki",e.resultsFor)},n.on("listOfGamesFromWiki",function(t){return e.gamesfound=[],e.gamesfound=t.results.length>20?t.results.slice(0,20):t.results,n.emit("searchForGames",{list:e.gamesfound})}),n.on("searchfinished",function(t){var r,n,o,a,i;for(e.games=[],a=0,i=t.length;i>a;a++)r=t[a],r.details?(n=r.details.guruscore,o=r.details.peerscore,n&&o?r.details.avgscore=(.75*n+1.25*o)/2:n?r.details.avgscore=n:o&&(r.details.avgscore=o)):(r.details={},r.details.avgscore=0),e.games.push(r);return e.setUpPages(),e.isLoading=!1}),"undefined"!=typeof a.game?(e.search=a.game,e.getGame()):(e.SearchForAGame=!0,e.isLoading=!1)},m.$inject=["$scope","$mdDialog","socket","$location"],r=function(e,r,n,o){return this.$scope=e,this.socket=n,e.isLoading=!0,n.emit("GetRecentGames"),this.socket.on("recentReleases",function(t){return e.isLoading=!1,e.recentGames=t}),this.socket.on("noGames",function(){return e.isLoading=!1,e.recentGames=!1}),t(r,e,n,o)},r.$inject=["$scope","$mdDialog","socket","$location"],e=function(e,t,r,n){return this.$scope=e,this.socket=r,this.$location=n,r.emit("GetConfidants"),e.getGameStyle=function(e){return{background:'url("images/'+e+'")',"background-size":"100% 100%%   ","background-repeat":"no-repeat","background-position":"center"}},e.isLoading=!0,e.confidantSelected=!1,r.on("listOfFriends",function(t){return e.myConfidants=t,e.isLoading=!1}),r.on("noFriendsFound",function(){return e.isLoading=!1}),r.on("noUsersFound",function(){return e.noneFound=!0,e.isLoadingAdder=!1}),r.on("listofPossibleConfidants",function(t){return e.confidantsFound=t,e.noneFound=!1,e.isLoadingAdder=!1}),e.selectConfidant=function(t){return e.confidantSelected=!0,e.canFlip="flip",e.newConfidant=t},e.goback=function(){return e.confidantSelected=!1,e.canFlip="false",e.newConfidant={}},e.closeModal=function(){return t.hide()},e.findConfidant=function(t){var n;return n={search:t},e.isLoadingAdder=!0,r.emit("SearchForConfidants",n)},e.addConfidant=function(){var t;return t={friendid:e.newConfidant.id},r.emit("AddConfidant",t),e.closeModal()},e.showConfidantAdder=function(r){return e.newConfidant={},t.show({scope:e,templateUrl:"views/addConfidantModal.html",targetEvent:r,preserveScope:!0,clickOutsideToClose:!0})}},e.$inject=["$scope","$mdDialog","socket","$location"],l=function(e,r,n,o){var a;return this.$scope=e,this.socket=n,this.$location=o,e.myLibrary=!1,e.scoreName="avgscore",e.isLoading=!0,a=o.search(),n.emit("GetListOfPlatforms",{data:"1"}),n.on("platformsFound",function(t){return e.platforms=t}),e.currentPlatform=a.platform,n.emit("GetPeerLibrary",a.platform),this.socket.on("peerLibraryFound",function(t){var r,n,o,a,i,s;for(e.games=[],s=t[0],a=0,i=s.length;i>a;a++)r=s[a],n=r.guruscore,o=r.peerscore,n&&o?r.avgscore=(.75*n+1.25*o)/2:n?r.avgscore=n:o&&(r.avgscore=o),e.games.push(r);return e.setUpPages(),e.isLoading=!1}),t(r,e,n,o)},l.$inject=["$scope","$mdDialog","socket","$location"],o=function(e,r,n,o){var a;return this.$scope=e,this.socket=n,this.$location=o,e.myLibrary=!1,e.scoreName="avgscore",e.isLoading=!0,a=o.search(),n.emit("GetListOfPlatforms",{data:"1"}),e.updatePlatform=function(t){return e.isLoading=!0,n.emit("GetGuruLibrary",t),e.currentPlatform=t},n.on("platformsFound",function(t){return e.platforms=t}),e.updatePlatform(a.platform),this.socket.on("guruLibraryFound",function(t){var r,n,o,a,i,s;for(e.games=[],s=t[0],a=0,i=s.length;i>a;a++)r=s[a],n=r.guruscore,o=r.peerscore,n&&o?r.avgscore=(.75*n+1.25*o)/2:n?r.avgscore=n:o&&(r.avgscore=o),e.games.push(r);return e.setUpPages(),e.isLoading=!1}),t(r,e,n,o)},o.$inject=["$scope","$mdDialog","socket","$location"],n=function(e){return this.$scope=e,e.contact=!1},n.$inject=["$scope"],s=function(e,r,n,o){var a;return this.$scope=e,this.socket=n,this.$location=o,e.isOpen=!1,e.demo={isOpen:!1,count:0,selectedAlignment:"md-left"},e.loggedin=!0,e.myLibrary=!0,e.NoLibraryError=!1,e.scoreName="rating",e.gameSelected=!1,e.isLoading=!0,e.editMode=!1,e.saveLibraryEdit=function(){return n.emit("UpdateUserLibraryInfo",e.user),e.editMode=!1},e.toggleEditMode=function(){return e.editMode=!e.editMode,e.updatedPicture=!1},a=o.path(),a=a.substring(1),e.Username=a,n.emit("GetLibrary",a),this.socket.on("init",function(){}),this.socket.on("noLibraryFound",function(){return e.NoLibraryError=!0}),this.socket.on("gameLibraryFound",function(t){var r,n,o,a,i,s;for(e.localLibrary=t.myLibrary,e.localLibrary&&e.createDropZone(),e.user=t.user[0],e.games=[],s=t.games,a=0,i=s.length;i>a;a++)r=s[a],n=r.guruscore,o=r.peerscore,n&&o?r.avgscore=(.75*n+1.25*o)/2:n?r.avgscore=n:o&&(r.avgscore=o),e.games.push(r);return e.setUpPages(),e.isLoading=!1}),e.searchForAGame=function(t){return e.isLoadingAdder=!0,n.emit("findGamesInWiki",t)},n.on("listOfGamesFromWiki",function(t){return e.gamesfound=[],e.gamesfound=t.results.length>20?t.results.slice(0,20):t.results,e.isLoadingAdder=!1}),e.addNewGame=function(t){return e.modalGame={},r.show({scope:e,templateUrl:"views/addGameModal.html",targetEvent:t,preserveScope:!0,clickOutsideToClose:!0}),e.canFlip="false",e.gameSelected=!1},e.editUserResponse=function(){},e.closeModal=function(){return e.newgame={},e.gamesfound={},r.hide()},e.addGameToLibrary=function(t){return e.newgame={},e.canFlip="flip",e.newgame.userInfo={},e.newgame.giantBombinfo={},e.newgame.giantBombinfo.giantBomb_id=t.id,e.newgame.giantBombinfo.game_name=t.name,e.newgame.giantBombinfo.game_picture=t.image.medium_url,e.newgame.giantBombinfo.description=t.deck,e.newgame.giantBombinfo.releasedate=t.original_release_date,e.newgame.platforms=t.platforms,e.newgame.userInfo.rating=3,e.newgame.userInfo.enjoyment=3,e.newgame.userInfo.length=3,e.newgame.userInfo.unenjoyment=3,e.newgame.userInfo.difficulty=3,e.gameSelected=!0},e.importFromSteam=function(t){return e.vanity={},r.show({scope:e,templateUrl:"views/steamImportModal.html",targetEvent:t,preserveScope:!0,clickOutsideToClose:!0}),e.importMode=!0,e.isTransfering=!0,e.vanityErrorMessage=!1},e.closeImportModal=function(){return r.hide()},e.getGamesFromSteam=function(){return e.importMode=!1,n.emit("importGamesFromSteam",e.vanity)},n.on("steamGamesToAdd",function(t){return e.isTransfering=!1,e.newSteamGames=t}),n.on("vanityNameNotFound",function(){return e.isTransfering=!1,e.vanityErrorMessage="Vanity name is not found on steam"}),e.goback=function(){return e.canFlip="false",e.gameSelected=!1},e.saveGame=function(){return n.emit("AddNewGameToLibrary",e.newgame),e.closeModal()},e.closeLibraryDetails=function(){return r.hide()},e.getGameDetails=function(t,n){return e.gamedetails=t,e.gamedetails.reviewLink=o.absUrl(),r.show({scope:e,templateUrl:"views/detailsLibraryModal.html",targetEvent:n,preserveScope:!0,clickOutsideToClose:!0})},e.closeEdit=function(){return r.hide(),e.edit={}},e.getIndexOfGame=function(t){var r,n,o,a,i,s;for(o=0,n=0,s=e.games,a=0,i=s.length;i>a;a++)r=s[a],r.id===t.id&&(o=n),n++;return o},e.showEdit=function(t,n){return e.edit={},e.edit=t,e.editingindex=e.getIndexOfGame(t),r.show({scope:e,templateUrl:"views/editScoreModal.html",targetEvent:n,preserveScope:!0,clickOutsideToClose:!0})},e.showRemove=function(t,o){var a;return e.editingindex=e.getIndexOfGame(t),a=r.confirm().parent(angular.element(document.body)).content("Would you like to delete this game?").ok("Remove").cancel("Cancel").targetEvent(o),r.show(a).then(function(){return n.emit("deleteGame",e.games[e.editingindex])},function(){})},e.updateGame=function(){return e.games[e.editingindex]=e.edit,e.edit.rating=parseInt(e.edit.rating),n.emit("updateGame",e.edit),e.editModal.hide()},t(r,e,n,o),e.dropzoneConfig={parallelUploads:1,maxFileSize:5},e.createDropZone=function(){var e;return Dropzone.autoDiscover=!1,e=new Dropzone("div#profileZone",{url:"/"}),e.previewsContainer=!1,e.dictDefaultMessage="Drop your profile image here",e.options={paramName:"icon",maxFilesize:5,createImageThumbnails:!1,dictDefaultMessage:"Drop your profile image here",accept:function(e){var r;return r=ss.createStream(),ss(n.mySocket).emit("newProfileImage",r,{name:e.name}),ss.createBlobReadStream(e).pipe(r)}}},n.on("pictureUpdated",function(t){return e.user.picture=t,e.updatedPicture=!0})},s.$inject=["$scope","$mdDialog","socket","$location"],angular.module("reviewApp",["ngAnimate","ngRoute","ngResource","ngSanitize","ngMaterial"],function(e){return e.when("/library",{templateUrl:"views/library.html",controller:"libraryController"}),e.when("/guru",{templateUrl:"views/library.html",controller:"guruController"}),e.when("/",{templateUrl:"views/home.html",controller:"homeController"}),e.when("/home",{templateUrl:"views/home.html",controller:"homeController"}),e.when("/faqs",{templateUrl:"views/faqs.html"}),e.when("/contact",{templateUrl:"views/contact.html",controller:"genericController"}),e.when("/confidants",{templateUrl:"views/confidants.html",controller:"confidantController"}),e.when("/PrivacyPolicy",{templateUrl:"views/PrivacyPolicy.html",controller:"genericController"}),e.when("/recommendations",{templateUrl:"views/recommendations.html",controller:"recommendationController"}),e.when("/blog",{templateUrl:"views/blog.html"}),e.when("/peer",{templateUrl:"views/library.html",controller:"peerController"}),e.when("/dashboard",{templateUrl:"views/dashboard.html",controller:"dashboardController"}),e.when("/settings",{templateUrl:"views/settings.html",controller:"s"}),e.when("/search",{templateUrl:"views/search.html",controller:"searchController"}),e.otherwise({templateUrl:"views/library.html",controller:"libraryController"})}).config(function(e){return e.theme("default").primaryPalette("deep-orange").accentPalette("orange")}).directive("platfromcard",function(){return{restrict:"E",templateUrl:"views/platformcard.html"}}).directive("confidantcard",function(){return{restrict:"E",templateUrl:"views/confidantCard.html"}}).directive("card",function(){return{restrict:"E",templateUrl:"views/card.html"}}).directive("searching",function(){return{restrict:"E",templateUrl:"views/searching.html"}}).directive("librarycard",function(){return{restrict:"E",templateUrl:"views/librarycard.html"}}).directive("searchcard",function(){return{restrict:"E",templateUrl:"views/searchcard.html"}}).directive("steamtransfer",function(){return{restrict:"E",templateUrl:"views/steamTransfer.html"}}).config(function(e){return e.defaults.useXDomain=!0,delete e.defaults.headers.common["X-Requested-With"]}).service("socket",["$rootScope",function(e){var t;return t=io.connect("http://Reviewkai.com:8080"),{on:function(r,n){return t.on(r,function(){var r;return r=arguments,e.$apply(function(){return n.apply(t,r)})})},emit:function(r,n,o){return t.emit(r,n,function(){var r;return r=arguments,e.$apply(function(){return o?o.apply(t,r):void 0})})},mySocket:t}}]).filter("myLimitTo",[function(){return function(e,t,r){var n,o,a,i;return o=Object.keys(e),o.length<1?[]:(a=new Object,n=0,i=0,angular.forEach(o,function(o){return n>=t?!1:i>=r?(a[o]=e[o],n++):i>=r++}),a)}}]).controller("homeController",a).controller("reviewController",u).controller("recommendationController",c).controller("searchController",m).controller("dashboardController",r).controller("confidantController",e).controller("peerController",l).controller("guruController",o).controller("genericController",n).controller("libraryController",s)}).call(this);